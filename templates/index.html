{%extends "base.html"%}
{% block title %}Index Page{% endblock%}

{% block content %}
    <h1>Hello world welcome to my flask app</h1> 
    <form method="POST" action="{{ url_for('index')}}">
        <input type="text" name="username" placeholder="Enter your name"><br>
        <input type="password" name="password" placeholder="Enter your password"><br>
        <input type="submit" value="Login"><br>
    </form>

    <h1>File Upload</h1>
    <form method="POST" action="{{url_for('file_upload')}}" enctype="multipart/form-data">
        <input type=file name="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, text/plain" required="required"><br>
        <input type="submit" value="Upload"><br>
    </form>

        <h1>Convert To CSV</h1>
    <form method="POST" action="{{url_for('convert_csv')}}" enctype="multipart/form-data">
        <input type=file name="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" required="required"><br>
        <input type="submit" value="Upload"><br>
    </form>

            <h1>Convert To CSV2</h1>
    <form method="POST" action="{{url_for('convert_csv')}}" enctype="multipart/form-data">
        <input type=file name="file" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" required="required"><br>
        <input type="submit" value="Upload"><br>
    </form>


    <h1>JavaScript JSON Request</h1>
    <button id="post_button">Send Post Request</button>

    <script type="text/javascript">
        const postButton = document.getElementById('post_button')

        const jsonData = {name:'Nji', greeting: 'Hello'}

        postButton.addEventListener('click', () => {
            fetch('{{url_for("handle_post")}}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json; charset=utf-8'
                },
                body: JSON.stringify(jsonData)
            })
                .then(response => response.json())
                .then(data => console.log('Success:', data))
                .catch((error) => {
                    console.error('Error:', error)
                })
        })
    </script>
{% endblock %}